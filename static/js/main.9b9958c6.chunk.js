(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(19)},15:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),s=a.n(r),c=a(1),i=a(2),l=a(4),u=a(3),h=a(5),b=a(6),d=a(7),m="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:k},f=(a(15),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="none",a=this.props.books,n=this.props.book,r=!0,s=!1,c=void 0;try{for(var i,l=a[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;if(n.id===u.id){t=u.shelf;break}}}catch(h){s=!0,c=h}finally{try{r||null==l.return||l.return()}finally{if(s)throw c}}return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:t,onChange:function(t){return e.props.action(e.props.book,t.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))}}]),t}(o.a.Component)),v=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.book,t={width:128,height:193,backgroundImage:"undefined"===typeof e.imageLinks?"none":"url("+e.imageLinks.thumbnail+")"};return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:t}),o.a.createElement(f,{books:this.props.books,book:this.props.book,action:this.props.action})),o.a.createElement("div",{className:"book-title"},e.title),o.a.createElement("div",{className:"book-authors"},e.author))}}]),t}(o.a.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},this.props.title),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},this.props.books.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(v,{book:t,books:e.props.books,action:e.props.action}))}))))}}]),t}(o.a.Component);var y=function(e){var t=e.books,a=t.filter(function(e){return"currentlyReading"===e.shelf}),n=t.filter(function(e){return"wantToRead"===e.shelf}),r=t.filter(function(e){return"read"===e.shelf});return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(E,{books:a,title:"Currently Reading",filter:"currentlyReading",action:e.action}),o.a.createElement(E,{books:n,title:"Want to Read",filter:"wantToRead",action:e.action}),o.a.createElement(E,{books:r,title:"Read",filter:"read",action:e.action})))},j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={results:[],query:"",error:!1},a.handleChange=a.handleChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=this,a=e.target.value;this.setState({query:a}),a&&function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(d.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})}(a).then(function(e){e.length>0?t.setState({results:e}):(t.setState({results:[]}),t.setState({error:!0}))})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement("button",{className:"close-search",onClick:this.props.close},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:this.handleChange}))),o.a.createElement("div",{className:"search-books-results"},this.state.results.length>0&&o.a.createElement("ol",{className:"books-grid"},this.state.results.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(v,{book:t,books:e.props.books,action:e.props.action,results:e.state.results}))})),this.state.error&&o.a.createElement("h3",null,"No results found.")))}}]),t}(o.a.Component),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleMove=a.handleMove.bind(Object(b.a)(Object(b.a)(a))),a.searchClose=a.searchClose.bind(Object(b.a)(Object(b.a)(a))),a.state={showSearchPage:!1,books:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getBooks()}},{key:"handleMove",value:function(e,t){var a=this.state.books.slice();a.includes(e)?console.log("book already included"):a.push(e);var n=e.id,o=a.findIndex(function(e){return e.id===n}),r=a[o];r.shelf=t,a.splice(o,1,r),this.setState({books:a}),function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})}(e,t).catch(function(e){console.log("failed API book move",e)})}},{key:"getBooks",value:function(){var e=this;fetch("".concat(m,"/books"),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){return e.setState({books:t})}).catch(function(e){console.log("failed book fetch",e)})}},{key:"searchClose",value:function(){this.setState({showSearchPage:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},this.state.showSearchPage?o.a.createElement(j,{close:this.searchClose,action:this.handleMove,books:this.state.books}):o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement(y,{books:this.state.books,action:this.handleMove}),o.a.createElement("div",{className:"open-search"},o.a.createElement("button",{onClick:function(){return e.setState({showSearchPage:!0})}},"Add a book"))))}}]),t}(o.a.Component);a(17);s.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[10,2,1]]]);
//# sourceMappingURL=main.9b9958c6.chunk.js.map